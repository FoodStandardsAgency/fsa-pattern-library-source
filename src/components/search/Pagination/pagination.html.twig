{% set pageIndexPrev =  (maxVisiblePages / 2)|round %}
{% set pageIndexNext  = (maxVisiblePages / 2)|round %}

<nav class="pagination" role="navigation" aria-label="{{ paginationType }} pagination">
  <ul class="pagination__list">
    <li>
      <ul class="pagination__item-group pagination__back{{ currentPage == 1 ? ' pagination__item-group--hidden' : '' }}" {{ currentPage == 1 ? 'aria-hidden="true"' : '' }}>
        <li class="pagination__item pagination__item--first">
          <a data-page="1" href="#" data-fsa-at="pagination-first">{{ firstLabel }}</a>
        </li>
        <li class="pagination__item pagination__item--previous">
          <a data-page="{{ currentPage - 1 }}" href="#" data-fsa-at="pagination-prev">{{ previousLabel }}</a>
        </li>
      </ul>
    </li>
    <li>
      <ul class="pagination__item-group pagination__numbered">
        {% if currentPage == 1 %}
          <li class="pagination__item pagination__item--numbered">
            <a data-page="1" href="#" aria-label="Current page, page 1" aria-current="page" aria-disabled="true" data-fsa-at="pagination-page-1">1</a>
          </li>
        {% else %}
          <li class="pagination__item pagination__item--numbered">
            <a data-page="1" href="#" aria-label="Go to page 1" data-fsa-at="pagination-page-1">1</a>
          </li>
        {% endif %}
        {% if currentPage > maxVisiblePages %}
          <li class="pagination__item pagination__item--numbered">
            <a data-page="{{ currentPage - maxVisiblePages }}" href="#" aria-label="Load previous {{ maxVisiblePages }} pages" data-fsa-at="pagination-load-previous">...</a>
          </li>
        {% endif %}
        {% for page in range (currentPage - pageIndexPrev, currentPage + pageIndexNext) %}
          {% if page > 1 and page < totalPages %}
            {% if page == currentPage %}
              <li class="pagination__item pagination__item--numbered">
                <a data-page="{{ page }}" href="#" aria-label="Current page, page {{ page }}" aria-current="page" aria-disabled="true" data-fsa-at="pagination-page-{{ page }}">{{ page }}</a>
              </li>
            {% else %}
              <li class="pagination__item pagination__item--numbered">
                <a data-page="{{ page }}" href="#" aria-label="Go to page {{ page }}" data-fsa-at="pagination-page-{{ page }}">{{ page }}</a>
              </li>
            {% endif %}
          {% endif %}
        {% endfor %}
        {% if currentPage < (totalPages - maxVisiblePages) %}
          <li class="pagination__item pagination__item--numbered">
            <a aria-label="Load next {{ maxVisiblePages }} pages" data-page="{{ currentPage + maxVisiblePages }} " href="#" data-fsa-at="pagination-load-next">...</a>
          </li>
        {% endif %}
        {% if totalPages > 1 %}
          {% if currentPage == totalPages %}
            <li class="pagination__item pagination__item--numbered">
              <a data-page="{{ totalPages }}" href="#" aria-label="Current page, page {{ totalPages }}" aria-current="page" aria-disabled="true" data-fsa-at="pagination-page-{{ totalPages }}">{{ totalPages }}</a>
            </li>
          {% else %}
            <li class="pagination__item pagination__item--numbered">
              <a data-page="{{ totalPages }}" href="#" aria-label="Go to page {{ totalPages }}" data-fsa-at="pagination-page-{{ totalPages }}">{{ totalPages }}</a>
            </li>
          {% endif %}
        {% endif %}
      </ul>
    </li>
    <li>
      <ul class="pagination__item-group pagination__forward{{ currentPage == totalPages ? ' pagination__item-group--hidden' : '' }}" {{ currentPage == totalPage ? 'aria-hidden="true"' : '' }}>
        <li class="pagination__item pagination__item--next">
          <a data-page="{{ currentPage + 1 }}" href="#" data-fsa-at="pagination-next">{{ nextLabel }}</a>
        </li>
        <li class="pagination__item pagination__item--last">
          <a data-page="{{ totalPages }}" href="#" data-fsa-at="pagination-last">{{ lastLabel }}</a>
        </li>
      </ul>
    </li>
  </ul>
</nav>
