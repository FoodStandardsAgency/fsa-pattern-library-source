{# TODO: Make the accordion it's own reusable component #}
<div class="datepicker">
  <fieldset class="accordion{{ fields is empty or fields is not defined ? " accordion--hidden" : "" }}" aria-describedby="{{ description_id }}" data-name="{{ name }}">
    <legend class="accordion__legend">
      <button class="accordion__button {{ open ? "accordion__button--expanded" : ""}}" aria-expanded={{ open ? "true" : "false"}} aria-controls={{ fields_id }}>
        <span class="accordion__title-text">{{ title }}</span>
      </button>
    </legend>
    <p class="accordion__description" id={{ description_id }} data-selected={{ selected }}></p>
    <div class="accordion__fields {{ open ? "accordion__fields--active" : ""}}" id={{ fields_id }}>
      {% for field in fields %}
        <div class="accordion__field">
          {% for select in field.datepicker %}
            {% include "@components/components/form/Select/select.html.twig" with {
              label: select.label,
              accessibleLabel: select.accessibleLabel,
              options: select.options,
            } %}
          {% endfor %}
        </div>
        <div class="accordion__field__apply-wrapper">
          <a href="{{ field.applyLink }}" class="accordion__field__apply-button">
            {{ field.apply }}
          </a>
        </div>
      {% endfor %}
    </div>
  </fieldset>
</div>